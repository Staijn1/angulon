<div *ngIf="spotifyAuth.isLoggedIn(); else notLoggedIn">
  <div *ngIf="isActive; else notActive">
    <div class="tw-mt-3">
      <div class="tw-bg-base-100 tw-shadow-lg tw-rounded tw-p-3">
        <div class="tw-group tw-relative">
          <img class="album-cover" [src]="albumImageSrc" alt="Image of Album Cover" />
          <div class="playback-controls-container">
            <button (click)="previousSong()">
              <fa-icon [icon]="previousSongIcon"></fa-icon>
            </button>

            <button (click)="togglePlay()">
              <fa-icon [icon]="getIconForPlayStatus" size="2x"></fa-icon>
            </button>

            <button (click)="skipSong()">
              <fa-icon [icon]="skipSongIcon"></fa-icon>
            </button>
          </div>
        </div>
        <div class="tw-p-5">
          <h3 class="tw-text-white text-lg">{{trackName}}</h3>
          <p class="tw-text-gray-400">{{artistName}}</p>
        </div>
      </div>
    </div>

    <div class="stack">
      <img src="/images/stock/photo-1559703248-dcaaec9fab78.jpg" alt="Image 1" class="rounded" />
      <img src="/images/stock/photo-1565098772267-60af42b81ef2.jpg" alt="Image 2" class="rounded" />
      <img src="/images/stock/photo-1572635148818-ef6fd45eb394.jpg" alt="Image 3" class="rounded" />
    </div>

    <!-- Playlist Section -->
    <div class='mt-5'>
      <h6>Upcoming Songs</h6>
      <ul class='list-unstyled'>
        <li
          *ngFor='let song of allTracks; let i = index'
          [class.currentTrack]='currentTrack === song'
          [class.previousTrack]='previousTracks.includes(song)'
          [class.upcomingTrack]='upcomingTracks.includes(song)'
          [style.opacity]='calculateOpacityForTrack(song, i)'
          class='track'
        >
          <div class='row'>
            <div class='col-md-3'>
              <img [src]='song.album.images[0].url' alt='Album Image' class='img-fluid'>
            </div>
            <div class='col-md-9 song-info'>
              <h6>{{song.name}}</h6>
              <p>{{getArtistNames(song)}}</p>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>

<ng-template #notLoggedIn>
  <a [href]="spotifyAuthenticationURL" class="tw-btn tw-btn-primary btn-spotify tw-w-full tw-mt-3">
    <fa-icon [icon]="spotifyIcon"></fa-icon>
    Login with Spotify
  </a>
</ng-template>

<ng-template #notActive>
  <h4> Spotify is not active!</h4>
  <p>Please select Angulon in the list of devices in your Spotify app and start playing music.</p>
</ng-template>

